{"version":3,"file":"errors.js","sourceRoot":"","sources":["../../src/errors.ts"],"names":[],"mappings":"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","sourcesContent":["import { Principal } from '@dfinity/principal';\nimport { type HttpDetailsResponse, type NodeSignature, type ReplicaRejectCode } from './agent/api.ts';\nimport { type RequestId } from './request_id.ts';\nimport { type Expiry, type RequestStatusResponseStatus } from './agent/http/index.ts';\nimport { type HttpHeaderField } from './agent/http/types.ts';\nimport { LookupPathStatus, LookupSubtreeStatus } from './certificate.ts';\nimport { bytesToHex } from '@noble/hashes/utils';\n\nexport enum ErrorKindEnum {\n  Trust = 'Trust',\n  Protocol = 'Protocol',\n  Reject = 'Reject',\n  Transport = 'Transport',\n  External = 'External',\n  Limit = 'Limit',\n  Input = 'Input',\n  Unknown = 'Unknown',\n}\n\nexport type RequestContext = {\n  requestId?: RequestId;\n  senderPubKey: Uint8Array;\n  senderSignature: Uint8Array;\n  ingressExpiry: Expiry;\n};\n\nexport type CallContext = {\n  canisterId: Principal;\n  methodName: string;\n  httpDetails: HttpDetailsResponse;\n};\n\nabstract class ErrorCode {\n  public requestContext?: RequestContext;\n  public callContext?: CallContext;\n\n  constructor(public readonly isCertified: boolean = false) {}\n\n  public abstract toErrorMessage(): string;\n\n  public toString(): string {\n    let errorMessage = this.toErrorMessage();\n    if (this.requestContext) {\n      errorMessage +=\n        `\\nRequest context:\\n` +\n        `  Request ID (hex): ${this.requestContext.requestId ? bytesToHex(this.requestContext.requestId) : 'undefined'}\\n` +\n        `  Sender pubkey (hex): ${bytesToHex(this.requestContext.senderPubKey)}\\n` +\n        `  Sender signature (hex): ${bytesToHex(this.requestContext.senderSignature)}\\n` +\n        `  Ingress expiry: ${this.requestContext.ingressExpiry.toString()}`;\n    }\n    if (this.callContext) {\n      errorMessage +=\n        `\\nCall context:\\n` +\n        `  Canister ID: ${this.callContext.canisterId.toText()}\\n` +\n        `  Method name: ${this.callContext.methodName}\\n` +\n        `  HTTP details: ${JSON.stringify(this.callContext.httpDetails, null, 2)}`;\n    }\n    return errorMessage;\n  }\n}\n\n/**\n * An error that happens in the Agent. This is the root of all errors and should be used\n * everywhere in the Agent code (this package).\n *\n * To know if the error is certified, use the `isCertified` getter.\n */\nexport class AgentError extends Error {\n  public name = 'AgentError';\n  // override the Error.cause property\n  public readonly cause: { code: ErrorCode; kind: ErrorKindEnum };\n\n  get code(): ErrorCode {\n    return this.cause.code;\n  }\n  set code(code: ErrorCode) {\n    this.cause.code = code;\n  }\n\n  get kind(): ErrorKindEnum {\n    return this.cause.kind;\n  }\n  set kind(kind: ErrorKindEnum) {\n    this.cause.kind = kind;\n  }\n\n  /**\n   * Reads the `isCertified` property of the underlying error code.\n   * @returns `true` if the error is certified, `false` otherwise.\n   */\n  get isCertified(): boolean {\n    return this.code.isCertified;\n  }\n\n  constructor(code: ErrorCode, kind: ErrorKindEnum) {\n    super(code.toString());\n    this.cause = { code, kind };\n    Object.setPrototypeOf(this, AgentError.prototype);\n  }\n\n  public hasCode<C extends ErrorCode>(code: new (...args: never[]) => C): boolean {\n    return this.code instanceof code;\n  }\n\n  public toString(): string {\n    return `${this.name} (${this.kind}): ${this.message}`;\n  }\n}\n\nclass ErrorKind extends AgentError {\n  public static fromCode<C extends ErrorCode, E extends ErrorKind>(\n    this: new (code: C) => E,\n    code: C,\n  ): E {\n    return new this(code);\n  }\n}\n\nexport class TrustError extends ErrorKind {\n  public name = 'TrustError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.Trust);\n    Object.setPrototypeOf(this, TrustError.prototype);\n  }\n}\n\nexport class ProtocolError extends ErrorKind {\n  public name = 'ProtocolError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.Protocol);\n    Object.setPrototypeOf(this, ProtocolError.prototype);\n  }\n}\n\nexport class RejectError extends ErrorKind {\n  public name = 'RejectError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.Reject);\n    Object.setPrototypeOf(this, RejectError.prototype);\n  }\n}\n\nexport class TransportError extends ErrorKind {\n  public name = 'TransportError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.Transport);\n    Object.setPrototypeOf(this, TransportError.prototype);\n  }\n}\n\nexport class ExternalError extends ErrorKind {\n  public name = 'ExternalError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.External);\n    Object.setPrototypeOf(this, ExternalError.prototype);\n  }\n}\n\nexport class LimitError extends ErrorKind {\n  public name = 'LimitError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.Limit);\n    Object.setPrototypeOf(this, LimitError.prototype);\n  }\n}\n\nexport class InputError extends ErrorKind {\n  public name = 'InputError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.Input);\n    Object.setPrototypeOf(this, InputError.prototype);\n  }\n}\n\nexport class UnknownError extends ErrorKind {\n  public name = 'UnknownError';\n\n  constructor(code: ErrorCode) {\n    super(code, ErrorKindEnum.Unknown);\n    Object.setPrototypeOf(this, UnknownError.prototype);\n  }\n}\n\nexport class CertificateVerificationErrorCode extends ErrorCode {\n  public name = 'CertificateVerificationErrorCode';\n\n  constructor(public readonly reason: string) {\n    super();\n    Object.setPrototypeOf(this, CertificateVerificationErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Certificate verification error: \"${this.reason}\"`;\n  }\n}\n\nexport class CertificateTimeErrorCode extends ErrorCode {\n  public name = 'CertificateTimeErrorCode';\n\n  constructor(\n    public readonly maxAgeInMinutes: number,\n    public readonly certificateTime: Date,\n    public readonly currentTime: Date,\n    public readonly ageType: 'past' | 'future',\n  ) {\n    super();\n    Object.setPrototypeOf(this, CertificateTimeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Certificate is signed more than ${this.maxAgeInMinutes} minutes in the ${this.ageType}. Certificate time: ${this.certificateTime.toISOString()} Current time: ${this.currentTime.toISOString()}`;\n  }\n}\n\nexport class CertificateHasTooManyDelegationsErrorCode extends ErrorCode {\n  public name = 'CertificateHasTooManyDelegationsErrorCode';\n\n  constructor() {\n    super();\n    Object.setPrototypeOf(this, CertificateHasTooManyDelegationsErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return 'Certificate has too many delegations';\n  }\n}\n\nexport class CertificateNotAuthorizedErrorCode extends ErrorCode {\n  public name = 'CertificateNotAuthorizedErrorCode';\n\n  constructor(\n    public readonly canisterId: Principal,\n    public readonly subnetId: Uint8Array,\n  ) {\n    super();\n    Object.setPrototypeOf(this, CertificateNotAuthorizedErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `The certificate contains a delegation that does not include the canister ${this.canisterId.toText()} in the canister_ranges field. Subnet ID: 0x${bytesToHex(this.subnetId)}`;\n  }\n}\n\nexport class LookupErrorCode extends ErrorCode {\n  public name = 'LookupErrorCode';\n\n  constructor(\n    public readonly message: string,\n    public readonly lookupStatus: LookupPathStatus | LookupSubtreeStatus,\n  ) {\n    super();\n    Object.setPrototypeOf(this, LookupErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `${this.message}. Lookup status: ${this.lookupStatus}`;\n  }\n}\n\nexport class MalformedLookupFoundValueErrorCode extends ErrorCode {\n  public name = 'MalformedLookupFoundValueErrorCode';\n\n  constructor(public readonly message: string) {\n    super();\n    Object.setPrototypeOf(this, MalformedLookupFoundValueErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return this.message;\n  }\n}\n\nexport class MissingLookupValueErrorCode extends ErrorCode {\n  public name = 'MissingLookupValueErrorCode';\n\n  constructor(public readonly message: string) {\n    super();\n    Object.setPrototypeOf(this, MissingLookupValueErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return this.message;\n  }\n}\n\nexport class DerKeyLengthMismatchErrorCode extends ErrorCode {\n  public name = 'DerKeyLengthMismatchErrorCode';\n\n  constructor(\n    public readonly expectedLength: number,\n    public readonly actualLength: number,\n  ) {\n    super();\n    Object.setPrototypeOf(this, DerKeyLengthMismatchErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `BLS DER-encoded public key must be ${this.expectedLength} bytes long, but is ${this.actualLength} bytes long`;\n  }\n}\n\nexport class DerPrefixMismatchErrorCode extends ErrorCode {\n  public name = 'DerPrefixMismatchErrorCode';\n\n  constructor(\n    public readonly expectedPrefix: Uint8Array,\n    public readonly actualPrefix: Uint8Array,\n  ) {\n    super();\n    Object.setPrototypeOf(this, DerPrefixMismatchErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `BLS DER-encoded public key is invalid. Expected the following prefix: ${bytesToHex(this.expectedPrefix)}, but got ${bytesToHex(this.actualPrefix)}`;\n  }\n}\n\nexport class DerDecodeLengthMismatchErrorCode extends ErrorCode {\n  public name = 'DerDecodeLengthMismatchErrorCode';\n\n  constructor(\n    public readonly expectedLength: number,\n    public readonly actualLength: number,\n  ) {\n    super();\n    Object.setPrototypeOf(this, DerDecodeLengthMismatchErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `DER payload mismatch: Expected length ${this.expectedLength}, actual length: ${this.actualLength}`;\n  }\n}\n\nexport class DerDecodeErrorCode extends ErrorCode {\n  public name = 'DerDecodeErrorCode';\n\n  constructor(public readonly error: string) {\n    super();\n    Object.setPrototypeOf(this, DerDecodeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to decode DER: ${this.error}`;\n  }\n}\n\nexport class DerEncodeErrorCode extends ErrorCode {\n  public name = 'DerEncodeErrorCode';\n\n  constructor(public readonly error: string) {\n    super();\n    Object.setPrototypeOf(this, DerEncodeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to encode DER: ${this.error}`;\n  }\n}\n\nexport class CborDecodeErrorCode extends ErrorCode {\n  public name = 'CborDecodeErrorCode';\n\n  constructor(\n    public readonly error: unknown,\n    public readonly input: Uint8Array,\n  ) {\n    super();\n    Object.setPrototypeOf(this, CborDecodeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to decode CBOR: ${this.error}, input: ${bytesToHex(this.input)}`;\n  }\n}\n\nexport class CborEncodeErrorCode extends ErrorCode {\n  public name = 'CborEncodeErrorCode';\n\n  constructor(\n    public readonly error: unknown,\n    public readonly value: unknown,\n  ) {\n    super();\n    Object.setPrototypeOf(this, CborEncodeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to encode CBOR: ${this.error}, input: ${this.value}`;\n  }\n}\n\nexport class HexDecodeErrorCode extends ErrorCode {\n  public name = 'HexDecodeErrorCode';\n\n  constructor(public readonly error: string) {\n    super();\n    Object.setPrototypeOf(this, HexDecodeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to decode hex: ${this.error}`;\n  }\n}\n\nexport class TimeoutWaitingForResponseErrorCode extends ErrorCode {\n  public name = 'TimeoutWaitingForResponseErrorCode';\n\n  constructor(\n    public readonly message: string,\n    public readonly requestId?: RequestId,\n    public readonly status?: RequestStatusResponseStatus,\n  ) {\n    super();\n    Object.setPrototypeOf(this, TimeoutWaitingForResponseErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    let errorMessage = `${this.message}\\n`;\n    if (this.requestId) {\n      errorMessage += `  Request ID: ${bytesToHex(this.requestId)}\\n`;\n    }\n    if (this.status) {\n      errorMessage += `  Request status: ${this.status}\\n`;\n    }\n    return errorMessage;\n  }\n}\n\nexport class CertificateOutdatedErrorCode extends ErrorCode {\n  public name = 'CertificateOutdatedErrorCode';\n\n  constructor(\n    public readonly maxIngressExpiryInMinutes: number,\n    public readonly requestId: RequestId,\n    public readonly retryTimes?: number,\n  ) {\n    super();\n    Object.setPrototypeOf(this, CertificateOutdatedErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    let errorMessage = `Certificate is stale (over ${this.maxIngressExpiryInMinutes} minutes). Is the computer's clock synchronized?\\n  Request ID: ${bytesToHex(this.requestId)}\\n`;\n    if (this.retryTimes !== undefined) {\n      errorMessage += `  Retried ${this.retryTimes} times.`;\n    }\n    return errorMessage;\n  }\n}\n\nexport class CertifiedRejectErrorCode extends ErrorCode {\n  public name = 'CertifiedRejectErrorCode';\n\n  constructor(\n    public readonly requestId: RequestId,\n    public readonly rejectCode: ReplicaRejectCode,\n    public readonly rejectMessage: string,\n    public readonly rejectErrorCode: string | undefined,\n  ) {\n    super(true);\n    Object.setPrototypeOf(this, CertifiedRejectErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return (\n      `The replica returned a rejection error:\\n` +\n      `  Request ID: ${bytesToHex(this.requestId)}\\n` +\n      `  Reject code: ${this.rejectCode}\\n` +\n      `  Reject text: ${this.rejectMessage}\\n` +\n      `  Error code: ${this.rejectErrorCode}\\n`\n    );\n  }\n}\n\nexport class UncertifiedRejectErrorCode extends ErrorCode {\n  public name = 'UncertifiedRejectErrorCode';\n\n  constructor(\n    public readonly requestId: RequestId,\n    public readonly rejectCode: ReplicaRejectCode,\n    public readonly rejectMessage: string,\n    public readonly rejectErrorCode: string | undefined,\n    public readonly signatures: NodeSignature[] | undefined,\n  ) {\n    super();\n    Object.setPrototypeOf(this, UncertifiedRejectErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return (\n      `The replica returned a rejection error:\\n` +\n      `  Request ID: ${bytesToHex(this.requestId)}\\n` +\n      `  Reject code: ${this.rejectCode}\\n` +\n      `  Reject text: ${this.rejectMessage}\\n` +\n      `  Error code: ${this.rejectErrorCode}\\n`\n    );\n  }\n}\n\nexport class RequestStatusDoneNoReplyErrorCode extends ErrorCode {\n  public name = 'RequestStatusDoneNoReplyErrorCode';\n\n  constructor(public readonly requestId: RequestId) {\n    super();\n    Object.setPrototypeOf(this, RequestStatusDoneNoReplyErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return (\n      `Call was marked as done but we never saw the reply:\\n` +\n      `  Request ID: ${bytesToHex(this.requestId)}\\n`\n    );\n  }\n}\n\nexport class MissingRootKeyErrorCode extends ErrorCode {\n  public name = 'MissingRootKeyErrorCode';\n\n  constructor(public readonly shouldFetchRootKey?: boolean) {\n    super();\n    Object.setPrototypeOf(this, MissingRootKeyErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    if (this.shouldFetchRootKey === undefined) {\n      return 'Agent is missing root key';\n    }\n    return `Agent is missing root key and the shouldFetchRootKey value is set to ${this.shouldFetchRootKey}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`;\n  }\n}\n\nexport class HashValueErrorCode extends ErrorCode {\n  public name = 'HashValueErrorCode';\n\n  constructor(public readonly value: unknown) {\n    super();\n    Object.setPrototypeOf(this, HashValueErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Attempt to hash a value of unsupported type: ${this.value}`;\n  }\n}\n\nexport class HttpDefaultFetchErrorCode extends ErrorCode {\n  public name = 'HttpDefaultFetchErrorCode';\n\n  constructor(public readonly error: string) {\n    super();\n    Object.setPrototypeOf(this, HttpDefaultFetchErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return this.error;\n  }\n}\n\nexport class IdentityInvalidErrorCode extends ErrorCode {\n  public name = 'IdentityInvalidErrorCode';\n\n  constructor() {\n    super();\n    Object.setPrototypeOf(this, IdentityInvalidErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return \"This identity has expired due this application's security policy. Please refresh your authentication.\";\n  }\n}\n\nexport class IngressExpiryInvalidErrorCode extends ErrorCode {\n  public name = 'IngressExpiryInvalidErrorCode';\n\n  constructor(\n    public readonly message: string,\n    public readonly providedIngressExpiryInMinutes: number,\n  ) {\n    super();\n    Object.setPrototypeOf(this, IngressExpiryInvalidErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `${this.message}. Provided ingress expiry time is ${this.providedIngressExpiryInMinutes} minutes.`;\n  }\n}\n\nexport class CreateHttpAgentErrorCode extends ErrorCode {\n  public name = 'CreateHttpAgentErrorCode';\n\n  constructor() {\n    super();\n    Object.setPrototypeOf(this, CreateHttpAgentErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return 'Failed to create agent from provided agent';\n  }\n}\n\nexport class MalformedSignatureErrorCode extends ErrorCode {\n  public name = 'MalformedSignatureErrorCode';\n\n  constructor(public readonly error: string) {\n    super();\n    Object.setPrototypeOf(this, MalformedSignatureErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Query response contained a malformed signature: ${this.error}`;\n  }\n}\n\nexport class MissingSignatureErrorCode extends ErrorCode {\n  public name = 'MissingSignatureErrorCode';\n\n  constructor() {\n    super();\n    Object.setPrototypeOf(this, MissingSignatureErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return 'Query response did not contain any node signatures';\n  }\n}\n\nexport class MalformedPublicKeyErrorCode extends ErrorCode {\n  public name = 'MalformedPublicKeyErrorCode';\n\n  constructor() {\n    super();\n    Object.setPrototypeOf(this, MalformedPublicKeyErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return 'Read state response contained a malformed public key';\n  }\n}\n\nexport class QuerySignatureVerificationFailedErrorCode extends ErrorCode {\n  public name = 'QuerySignatureVerificationFailedErrorCode';\n\n  constructor(public readonly nodeId: string) {\n    super();\n    Object.setPrototypeOf(this, QuerySignatureVerificationFailedErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Query signature verification failed. Node ID: ${this.nodeId}`;\n  }\n}\n\nexport class UnexpectedErrorCode extends ErrorCode {\n  public name = 'UnexpectedErrorCode';\n\n  constructor(public readonly error: unknown) {\n    super();\n    Object.setPrototypeOf(this, UnexpectedErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Unexpected error: ${this.error}`;\n  }\n}\n\nexport class HashTreeDecodeErrorCode extends ErrorCode {\n  public name = 'HashTreeDecodeErrorCode';\n\n  constructor(public readonly error: string) {\n    super();\n    Object.setPrototypeOf(this, HashTreeDecodeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to decode certificate: ${this.error}`;\n  }\n}\n\nexport class HttpErrorCode extends ErrorCode {\n  public name = 'HttpErrorCode';\n\n  constructor(\n    public readonly status: number,\n    public readonly statusText: string,\n    public readonly headers: HttpHeaderField[],\n    public readonly bodyText?: string,\n  ) {\n    super();\n    Object.setPrototypeOf(this, HttpErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    let errorMessage =\n      'HTTP request failed:\\n' +\n      `  Status: ${this.status} (${this.statusText})\\n` +\n      `  Headers: ${JSON.stringify(this.headers)}\\n`;\n    if (this.bodyText) {\n      errorMessage += `  Body: ${this.bodyText}\\n`;\n    }\n    return errorMessage;\n  }\n}\n\nexport class HttpV3ApiNotSupportedErrorCode extends ErrorCode {\n  public name = 'HttpV3ApiNotSupportedErrorCode';\n\n  constructor() {\n    super();\n    Object.setPrototypeOf(this, HttpV3ApiNotSupportedErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return 'HTTP request failed: v3 API is not supported';\n  }\n}\n\nexport class HttpFetchErrorCode extends ErrorCode {\n  public name = 'HttpFetchErrorCode';\n\n  constructor(public readonly error: unknown) {\n    super();\n    Object.setPrototypeOf(this, HttpFetchErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to fetch HTTP request: ${this.error}`;\n  }\n}\n\nexport class MissingCanisterIdErrorCode extends ErrorCode {\n  public name = 'MissingCanisterIdErrorCode';\n\n  constructor(public readonly receivedCanisterId: unknown) {\n    super();\n    Object.setPrototypeOf(this, MissingCanisterIdErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Canister ID is required, but received ${typeof this.receivedCanisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`;\n  }\n}\n\nexport class InvalidReadStateRequestErrorCode extends ErrorCode {\n  public name = 'InvalidReadStateRequestErrorCode';\n\n  constructor(public readonly request: unknown) {\n    super();\n    Object.setPrototypeOf(this, InvalidReadStateRequestErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Invalid read state request: ${this.request}`;\n  }\n}\n\nexport class ExpiryJsonDeserializeErrorCode extends ErrorCode {\n  public name = 'ExpiryJsonDeserializeErrorCode';\n\n  constructor(public readonly error: string) {\n    super();\n    Object.setPrototypeOf(this, ExpiryJsonDeserializeErrorCode.prototype);\n  }\n\n  public toErrorMessage(): string {\n    return `Failed to deserialize expiry: ${this.error}`;\n  }\n}\n\n/**\n * Special error used to indicate that a code path is unreachable.\n *\n * For internal use only.\n */\nexport const UNREACHABLE_ERROR = new Error('unreachable');\n"]}